"use strict";(self["webpackChunkvue_antd_pro"]=self["webpackChunkvue_antd_pro"]||[]).push([[547],{46077:function(e,a,r){r.d(a,{Z:function(){return c}});r(68309);var t=function(){var e=this,a=e._self._c;return a("a-modal",{attrs:{title:e.ruleForm&&e.ruleForm.id?"编辑会员":"新增会员",width:640,visible:e.visible,confirmLoading:e.loading},on:{ok:e.confirmHandler,cancel:e.cancelHandler}},[a("a-spin",{attrs:{spinning:e.loading}},[a("a-form-model",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-col":{span:5},"wrapper-col":{span:15}}},[a("a-form-model-item",{attrs:{label:"会员名称",prop:"name"}},[a("a-input",{attrs:{placeholder:"请输入会员名称",allowClear:""},model:{value:e.ruleForm.name,callback:function(a){e.$set(e.ruleForm,"name",a)},expression:"ruleForm.name"}})],1),a("a-form-model-item",{attrs:{label:"会员手机号码",prop:"phone"}},[a("a-input",{attrs:{placeholder:"请输入会员手机号码",allowClear:""},model:{value:e.ruleForm.phone,callback:function(a){e.$set(e.ruleForm,"phone",a)},expression:"ruleForm.phone"}})],1),a("a-form-model-item",{attrs:{label:"会员等级",prop:"userLevel"}},[a("a-select",{attrs:{allowClear:"",placeholder:"请选择会员等级"},model:{value:e.ruleForm.userLevel,callback:function(a){e.$set(e.ruleForm,"userLevel",a)},expression:"ruleForm.userLevel"}},e._l(e.userLevelArr,(function(r){return a("a-select-option",{key:r.value,attrs:{value:r.value}},[e._v(" "+e._s(r.label)+" ")])})),1)],1),a("a-form-model-item",{attrs:{label:"推荐人",prop:"tjr"}},[a("a-input",{attrs:{placeholder:"请输入推荐人",allowClear:""},model:{value:e.ruleForm.tjr,callback:function(a){e.$set(e.ruleForm,"tjr",a)},expression:"ruleForm.tjr"}})],1),a("a-form-model-item",{attrs:{label:"运营中心",prop:"yyzx"}},[a("a-radio-group",{attrs:{"default-value":"1"},model:{value:e.ruleForm.yyzx,callback:function(a){e.$set(e.ruleForm,"yyzx",a)},expression:"ruleForm.yyzx"}},[a("a-radio",{attrs:{value:"1"}},[e._v(" 是 ")]),a("a-radio",{attrs:{value:"2"}},[e._v(" 否 ")])],1)],1),a("a-form-model-item",{attrs:{label:"分公司",prop:"fgs"}},[a("a-radio-group",{attrs:{"default-value":"1"},model:{value:e.ruleForm.fgs,callback:function(a){e.$set(e.ruleForm,"fgs",a)},expression:"ruleForm.fgs"}},[a("a-radio",{attrs:{value:"1"}},[e._v(" 是 ")]),a("a-radio",{attrs:{value:"2"}},[e._v(" 否 ")])],1)],1)],1)],1)],1)},l=[],o=r(70206),s=[{value:"1",label:"个人代理"},{value:"2",label:"企业代理"},{value:"3",label:"县级代理"},{value:"4",label:"城市代理"},{value:"5",label:"省级代理"}],n={data:function(){return{visible:!1,loading:!1,ruleForm:{},rules:{name:[{required:!0,message:"请输入会员名称",trigger:"blur"}],phone:[{required:!0,message:"请输入会员手机号码",trigger:"blur"},{pattern:/^1[34578]\d{9}$/,message:"请输入正确的手机号码"}],userLevel:[{required:!0,message:"请选择会员等级",trigger:"change"}],yyzx:[{required:!0,message:"请选择运营中心"}],fgs:[{required:!0,message:"请选择分公司"}],tjr:[{required:!0,message:"请输入推荐人",trigger:"blur"}]},userLevelArr:s}},methods:{open:function(e){var a=this;e.userLevel&&(e.userLevel=e.userLevel+""),this.ruleForm=e,this.visible=!0,setTimeout((function(){a.$refs.ruleForm.clearValidate()}),100)},cancelHandler:function(){this.visible=!1},confirmHandler:function(){var e=this;this.$refs.ruleForm.validate((function(a){a&&(e.loading=!0,(0,o.createOrUpdateMember)(e.ruleForm).then((function(){e.loading=!1,e.$notification.success({message:"成功提示",description:"".concat(e.ruleForm.id?"编辑":"创建","会员成功")}),e.visible=!1,e.$emit("ok")})).catch((function(){e.loading=!1})))}))}}},i=n,u=r(1001),m=(0,u.Z)(i,t,l,!1,null,null,null),c=m.exports},4831:function(e,a,r){r.r(a),r.d(a,{default:function(){return g}});r(68309);var t=function(){var e=this,a=this,r=a._self._c;return r("a-card",{attrs:{bordered:!1}},[r("div",{staticClass:"table-page-search-wrapper"},[r("a-form",{attrs:{layout:"inline"}},[r("a-row",{attrs:{gutter:48}},[r("a-col",{attrs:{md:4,sm:24}},[r("a-form-item",{attrs:{label:"币种代码"}},[r("a-input",{attrs:{"allow-clear":""},model:{value:a.queryParam.id,callback:function(e){a.$set(a.queryParam,"id",e)},expression:"queryParam.id"}})],1)],1),r("a-col",{attrs:{md:4,sm:24}},[r("a-form-item",{attrs:{label:"币种名称"}},[r("a-input",{attrs:{"allow-clear":""},model:{value:a.queryParam.name,callback:function(e){a.$set(a.queryParam,"name",e)},expression:"queryParam.name"}})],1)],1),r("a-col",{attrs:{md:a.advanced?24:8,sm:24}},[r("span",{staticClass:"table-page-search-submitButtons",style:a.advanced&&{float:"right",overflow:"hidden"}||{}},[r("a-button",{attrs:{type:"primary"},on:{click:function(e){return a.$refs.table.refresh(!0)}}},[a._v("查询")]),r("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return e.queryParam={}}}},[a._v("重置")]),r("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:a.handleAdd}},[a._v("新增")])],1)])],1)],1)],1),r("s-table",{ref:"table",attrs:{size:"default",rowKey:"id",columns:a.columns,data:a.loadData,showPagination:"auto",scroll:{x:"max-content"},bordered:""},scopedSlots:a._u([{key:"logo",fn:function(e,a){return r("span",{},[r("img",{staticStyle:{width:"64px",height:"64px"},attrs:{src:a.logo}})])}},{key:"action",fn:function(e,t){return r("span",{},[[r("a",{on:{click:function(e){return a.handleEdit(t)}}},[a._v("修改排序")])]],2)}}])}),r("a-modal",{attrs:{title:"新增股票",width:640,visible:a.createVisible,confirmLoading:a.confirmLoading,maskClosable:!1,destroyOnClose:!0},on:{ok:a.handleCreateOk,cancel:a.handleCreateCancel}},[r("a-form",{attrs:{form:a.form,layout:"vertical"}},[r("a-form-item",{attrs:{label:"名称"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入名称"}]}],expression:"[\n            'name',\n            {\n              rules: [{ required: true, message: '请输入名称' }]\n            }\n          ]"}],attrs:{placeholder:"请输入名称"}})],1),r("a-form-item",{attrs:{label:"图标"}},[r("a-upload",{staticClass:"avatar-uploader",attrs:{name:"file",action:a.uploadUrl,headers:a.headers,showUploadList:!1},on:{change:a.handleChange}},[a.imageUrl?r("div",{staticClass:"image-preview"},[r("img",{attrs:{src:a.imageUrl,alt:"logo"}}),r("div",{staticClass:"image-preview-mask"},[r("a-icon",{attrs:{type:"plus"}})],1)]):r("div",{staticClass:"upload-placeholder"},[r("a-icon",{attrs:{type:"plus"}}),r("div",{staticClass:"ant-upload-text"},[a._v("点击上传图标")])],1)])],1)],1)],1)],1)},l=[],o=r(3360),s=(r(41539),r(82165)),n=r(70206),i=r(30381),u=r.n(i),m=r(46077),c=[{title:"币种代码",dataIndex:"id"},{title:"币种名称",dataIndex:"name"},{title:"图标",dataIndex:"logo",scopedSlots:{customRender:"logo"}},{title:"币种类型",dataIndex:"type",customRender:function(e){return"crypt"===e?"虚拟币":"贵金属"}}],d={name:"TableList",components:{STable:s.m7,Ellipsis:s.mH,CreateMemberForm:m.Z},data:function(){var e=this;return this.columns=c,{createVisible:!1,confirmLoading:!1,imageUrl:"",uploadUrl:"https://arkfintechgroup.net/api/file/upload",headers:{Authorization:"Bearer "+localStorage.getItem("Admin-Token")},labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},form:this.$form.createForm(this),editLevel:!1,advanced:!1,queryParam:{},upUserModel:{tjsy:"1",fhsy:"1",id:""},loadData:function(a){var r=Object.assign({pageSize:10,pageNo:1},a,e.queryParam);return(0,n.jN)(r).then((function(e){return e.data}))}}},methods:{handleAdd:function(){this.createVisible=!0},handleChange:function(e){"done"===e.file.status&&(this.imageUrl=e.file.response.data)},handleCreateOk:function(){var e=this;this.form.validateFields((function(a,r){if(!a){if(!e.imageUrl)return void e.$message.error("请上传图标");e.confirmLoading=!0;var t=(0,o.Z)((0,o.Z)({},r),{},{logo:e.imageUrl});(0,n.Yc)(t).then((function(a){e.$message.success("新增成功"),e.createVisible=!1,e.$refs.table.refresh()})).catch((function(a){e.$message.error("新增失败："+a.message)})).finally((function(){e.confirmLoading=!1}))}}))},handleCreateCancel:function(){this.form.resetFields(),this.imageUrl="",this.createVisible=!1},disabledDate:function(e){if(this.queryParam.startDate)return e<u()(this.queryParam.startDate)}}},f=d,p=r(1001),v=(0,p.Z)(f,t,l,!1,null,"90fbff92",null),g=v.exports}}]);