"use strict";(self["webpackChunkvue_antd_pro"]=self["webpackChunkvue_antd_pro"]||[]).push([[921],{92488:function(e,r,a){a.r(r),a.d(r,{default:function(){return v}});a(68309);var l=function(){var e=this,r=e._self._c;return r("a-card",{attrs:{bordered:!1}},[r("a-button",{attrs:{type:"primary"},on:{click:function(r){return e.handleAdd()}}},[e._v("新建")]),r("s-table",{ref:"table",attrs:{size:"default",rowKey:"id",columns:e.columns,data:e.loadData,showPagination:"auto",scroll:{x:"max-content"},bordered:""},scopedSlots:e._u([{key:"action",fn:function(a,l){return r("span",{},[[r("a",{on:{click:function(r){return e.handleEdit(l)}}},[e._v("编辑")])],r("a-divider",{attrs:{type:"vertical"}}),[r("a",{on:{click:function(r){return e.handleDel(l)}}},[e._v("删除")])]],2)}}])}),r("a-modal",{attrs:{title:"秒合约产品",visible:e.visible,"confirm-loading":e.confirmLoading},on:{ok:e.handleOk,cancel:e.handleCancel}},[r("a-form-model",{attrs:{model:e.upUserModel}},[r("a-form-model-item",{attrs:{label:"产品名称"}},[r("a-input",{attrs:{"allow-clear":""},model:{value:e.upUserModel.name,callback:function(r){e.$set(e.upUserModel,"name",r)},expression:"upUserModel.name"}})],1),r("a-form-model-item",{attrs:{label:"锁仓天数"}},[r("a-input",{attrs:{type:"number","allow-clear":""},model:{value:e.upUserModel.days,callback:function(r){e.$set(e.upUserModel,"days",r)},expression:"upUserModel.days"}})],1),r("a-form-model-item",{attrs:{label:"日利息"}},[r("a-input",{attrs:{type:"number","allow-clear":""},model:{value:e.upUserModel.rate,callback:function(r){e.$set(e.upUserModel,"rate",r)},expression:"upUserModel.rate"}})],1),r("a-form-model-item",{attrs:{label:"最小金额"}},[r("a-input",{attrs:{type:"number","allow-clear":""},model:{value:e.upUserModel.minNum,callback:function(r){e.$set(e.upUserModel,"minNum",r)},expression:"upUserModel.minNum"}})],1),r("a-form-model-item",{attrs:{label:"排序"}},[r("a-input",{attrs:{type:"number","allow-clear":""},model:{value:e.upUserModel.orderNum,callback:function(r){e.$set(e.upUserModel,"orderNum",r)},expression:"upUserModel.orderNum"}})],1)],1)],1),r("create-member-form",{ref:"createModal",on:{ok:function(r){return e.$refs.table.refresh(!0)}}})],1)},t=[],o=a(82165),n=a(70206),s=a(30381),i=a.n(s),u=a(46077),d=[{title:"名称",dataIndex:"name"},{title:"锁仓天数",dataIndex:"days"},{title:"日利息",dataIndex:"rate"},{title:"最小金额",dataIndex:"minNum"},{title:"最大金额",dataIndex:"maxNum"},{title:"排序",dataIndex:"orderNum"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],m={name:"TableList",components:{STable:o.m7,Ellipsis:o.mH,CreateMemberForm:u.Z},data:function(){var e=this;return this.columns=d,{editLevel:!1,formState:{level:"0",id:""},confirmLoading:!1,visible:!1,advanced:!1,queryParam:{},upUserModel:{},loadData:function(r){var a=Object.assign({},r,e.queryParam);return(0,n.$x)(a).then((function(e){return e.data}))}}},methods:{disabledDate:function(e){if(this.queryParam.startDate)return e<i()(this.queryParam.startDate)},handleOk:function(){var e=this;(0,n.JZ)(this.upUserModel).then((function(){e.visible=!1,e.$refs.table.refresh(!0),e.upUserModel={}})).catch((function(){e.visible=!1,e.upUserModel={}}))},handleCancel:function(){this.visible=!1,this.upUserModel={}},handleAdd:function(){this.upUserModel={},this.visible=!0},handleEdit:function(e){this.upUserModel=e,this.visible=!0},handleDel:function(e){var r=this;this.$confirm({title:"提示",content:"确定删除吗？",onOk:function(){(0,n.jG)(e.id).then((function(){r.$message.success("删除成功"),r.$refs.table.refresh(!0)}))},onCancel:function(){}})}}},c=m,p=a(1001),f=(0,p.Z)(c,l,t,!1,null,null,null),v=f.exports},46077:function(e,r,a){a.d(r,{Z:function(){return m}});a(68309);var l=function(){var e=this,r=e._self._c;return r("a-modal",{attrs:{title:e.ruleForm&&e.ruleForm.id?"编辑会员":"新增会员",width:640,visible:e.visible,confirmLoading:e.loading},on:{ok:e.confirmHandler,cancel:e.cancelHandler}},[r("a-spin",{attrs:{spinning:e.loading}},[r("a-form-model",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-col":{span:5},"wrapper-col":{span:15}}},[r("a-form-model-item",{attrs:{label:"会员名称",prop:"name"}},[r("a-input",{attrs:{placeholder:"请输入会员名称",allowClear:""},model:{value:e.ruleForm.name,callback:function(r){e.$set(e.ruleForm,"name",r)},expression:"ruleForm.name"}})],1),r("a-form-model-item",{attrs:{label:"会员手机号码",prop:"phone"}},[r("a-input",{attrs:{placeholder:"请输入会员手机号码",allowClear:""},model:{value:e.ruleForm.phone,callback:function(r){e.$set(e.ruleForm,"phone",r)},expression:"ruleForm.phone"}})],1),r("a-form-model-item",{attrs:{label:"会员等级",prop:"userLevel"}},[r("a-select",{attrs:{allowClear:"",placeholder:"请选择会员等级"},model:{value:e.ruleForm.userLevel,callback:function(r){e.$set(e.ruleForm,"userLevel",r)},expression:"ruleForm.userLevel"}},e._l(e.userLevelArr,(function(a){return r("a-select-option",{key:a.value,attrs:{value:a.value}},[e._v(" "+e._s(a.label)+" ")])})),1)],1),r("a-form-model-item",{attrs:{label:"推荐人",prop:"tjr"}},[r("a-input",{attrs:{placeholder:"请输入推荐人",allowClear:""},model:{value:e.ruleForm.tjr,callback:function(r){e.$set(e.ruleForm,"tjr",r)},expression:"ruleForm.tjr"}})],1),r("a-form-model-item",{attrs:{label:"运营中心",prop:"yyzx"}},[r("a-radio-group",{attrs:{"default-value":"1"},model:{value:e.ruleForm.yyzx,callback:function(r){e.$set(e.ruleForm,"yyzx",r)},expression:"ruleForm.yyzx"}},[r("a-radio",{attrs:{value:"1"}},[e._v(" 是 ")]),r("a-radio",{attrs:{value:"2"}},[e._v(" 否 ")])],1)],1),r("a-form-model-item",{attrs:{label:"分公司",prop:"fgs"}},[r("a-radio-group",{attrs:{"default-value":"1"},model:{value:e.ruleForm.fgs,callback:function(r){e.$set(e.ruleForm,"fgs",r)},expression:"ruleForm.fgs"}},[r("a-radio",{attrs:{value:"1"}},[e._v(" 是 ")]),r("a-radio",{attrs:{value:"2"}},[e._v(" 否 ")])],1)],1)],1)],1)],1)},t=[],o=a(70206),n=[{value:"1",label:"个人代理"},{value:"2",label:"企业代理"},{value:"3",label:"县级代理"},{value:"4",label:"城市代理"},{value:"5",label:"省级代理"}],s={data:function(){return{visible:!1,loading:!1,ruleForm:{},rules:{name:[{required:!0,message:"请输入会员名称",trigger:"blur"}],phone:[{required:!0,message:"请输入会员手机号码",trigger:"blur"},{pattern:/^1[34578]\d{9}$/,message:"请输入正确的手机号码"}],userLevel:[{required:!0,message:"请选择会员等级",trigger:"change"}],yyzx:[{required:!0,message:"请选择运营中心"}],fgs:[{required:!0,message:"请选择分公司"}],tjr:[{required:!0,message:"请输入推荐人",trigger:"blur"}]},userLevelArr:n}},methods:{open:function(e){var r=this;e.userLevel&&(e.userLevel=e.userLevel+""),this.ruleForm=e,this.visible=!0,setTimeout((function(){r.$refs.ruleForm.clearValidate()}),100)},cancelHandler:function(){this.visible=!1},confirmHandler:function(){var e=this;this.$refs.ruleForm.validate((function(r){r&&(e.loading=!0,(0,o.createOrUpdateMember)(e.ruleForm).then((function(){e.loading=!1,e.$notification.success({message:"成功提示",description:"".concat(e.ruleForm.id?"编辑":"创建","会员成功")}),e.visible=!1,e.$emit("ok")})).catch((function(){e.loading=!1})))}))}}},i=s,u=a(1001),d=(0,u.Z)(i,l,t,!1,null,null,null),m=d.exports}}]);